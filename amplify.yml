version: 1
env:
  variables:
    key: value

backend:
  phases:
    build:
      commands:
        - amplifyPush --simple
        - cd server # Assuming your backend code is in the 'server' directory, adjust this path accordingly
        - yarn install # Install dependencies (ensure they are listed in package.json)
        - yarn start # Start the backend server


frontend:
  phases:
    preBuild:
      commands:
        - cd my-app
        - yarn install
    build:
      commands:
        - yarn build
  artifacts:
    baseDirectory: my-app/build
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
